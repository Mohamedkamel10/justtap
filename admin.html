<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Admin – JustTap</title>
<link rel="stylesheet" href="admin.css">
</head>
<body>

<h2>إضافة يوزر جديد</h2>

<input id="username" placeholder="username">
<input id="name" placeholder="الاسم">
<input id="job" placeholder="الوظيفة">

<label>Avatar</label>
<input type="file" id="avatar">

<label>Cover</label>
<input type="file" id="cover">

<input id="instagram" placeholder="Instagram">
<input id="facebook" placeholder="Facebook">
<input id="whatsapp" placeholder="WhatsApp">
<input id="snapchat" placeholder="snapchat">
<input id="tictok" placeholder="tictok">
<input id="twitter" placeholder="twitter">
<input id="linkedin" placeholder="linkedin">



<button id="saveBtn">حفظ</button>

<script type="module">
import { uploadImage, saveUser } from "./firebase.js";

document.getElementById("saveBtn").onclick = async () => {
  const username = document.getElementById("username").value;

  let avatarURL = "";
  let coverURL = "";

  if (avatar.files[0]) {
    avatarURL = await uploadImage(avatar.files[0], `avatars/${username}.jpg`);
  }

  if (cover.files[0]) {
    coverURL = await uploadImage(cover.files[0], `covers/${username}.jpg`);
  }

  await saveUser(username, {
    name: name.value,
    job: job.value,
    avatar: avatarURL,
    cover: coverURL,
    socials: {
      instagram: instagram.value,
      facebook: facebook.value,
      whatsapp: whatsapp.value,
      snapchat: snapchat.value,
      tictok: tictok.value,
      twitter: twitter.value,
      linkedin: linkedin.value
    }
  });

  alert("تم الحفظ بنجاح ✅");
};
</script>

</body>
</html>
