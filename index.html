<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>JustTap Profile</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body {
  background:#f5f5f5;
  font-family: Arial, sans-serif;
  display:flex;
  justify-content:center;
  padding:30px;
}

/* Main Card */
.card {
  width:360px;
  background:#fff;
  border-radius:20px;
  box-shadow:0 10px 30px rgba(0,0,0,.1);
  overflow:hidden;
  text-align:center;
}

/* Cover */
.cover {
  height:180px;
  background-size:cover;
  background-position:center;
}

/* Avatar */
.avatar {
  width:120px;
  height:120px;
  border-radius:50%;
  border:5px solid #fff;
  margin-top:-60px;
  object-fit:cover;
}

/* Text */
h2 {
  margin:10px 0 5px;
}
.job {
  color:#777;
  font-size:14px;
}
.company {
  color:#999;
  font-size:13px;
}

/* Call & Email */
.actions {
  display:flex;
  justify-content:center;
  gap:20px;
  margin:15px 0;
}
.actions a {
  width:60px;
  height:60px;
  border-radius:50%;
  background:#f5f5f5;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:22px;
  color:#000;
  text-decoration:none;
  transition:.2s;
}
.actions a:hover {
  background:#000;
  color:#fff;
  transform:scale(1.1);
}

/* Social Box */
.social-box {
  background:#f2f2f2;
  margin:20px;
  border-radius:15px;
  padding:15px;
  display:grid;
  grid-template-columns: repeat(2, 1fr);
  gap:15px;
}
.social-item {
  background:#fff;
  border-radius:12px;
  padding:15px;
  text-align:center;
  box-shadow:0 3px 10px rgba(0,0,0,.05);
  transition:.2s;
}
.social-item:hover {
  transform:scale(1.05);
}
.social-item i {
  font-size:40px;
}
.social-item p {
  margin-top:8px;
  font-size:13px;
  text-transform:capitalize;
}
.social-item.center {
  grid-column: span 2;
  justify-self:center;
  width:50%;
}
</style>
</head>

<body>

<div class="card">
  
  <!-- Cover -->
  <div id="cover" class="cover"></div>

  <!-- Avatar -->
  <img id="avatar" class="avatar" />

  <!-- Info -->
  <h2 id="name">Loading...</h2>
  <div id="job" class="job"></div>
  <div id="company" class="company"></div>

  <!-- Email & Phone -->
  <div class="actions">
    <a id="email"><i class="fa-solid fa-envelope"></i></a>
    <a id="phone"><i class="fa-solid fa-phone"></i></a>
  </div>

  <!-- Social -->
  <div id="socials" class="social-box"></div>

</div>


<script>
/* ðŸ”¥ Firebase Config */
const firebaseConfig = {
  apiKey: "AIzaSyBgIH7EBZy-FFipEtBf0u1Db5uH6tVGKW8",
  authDomain: "just-tap-4e85e.firebaseapp.com",
  projectId: "just-tap-4e85e",
  storageBucket: "just-tap-4e85e.appspot.com",
  messagingSenderId: "497081794470",
  appId: "1:497081794470:web:f14285e82562c2292d5967"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

/* Get user from URL */
const params = new URLSearchParams(window.location.search);
const username = params.get("user");

/* Load Data */
db.collection("users").doc(username).get().then(doc=>{
  if(!doc.exists) return alert("User not found");
  const d = doc.data();

  // Text
  name.innerText = d.name || "";
  job.innerText = d.job || "";
  company.innerText = d.company || "";

  // Images
  avatar.src = d.avatar || "assets/images/avatar.jpg";
  cover.style.backgroundImage = `url('${d.cover || "assets/images/cover.jpg"}')`;

  // Phone & Email
  if(d.phone) phone.href = "tel:" + d.phone;
  if(d.email) email.href = "mailto:" + d.email;

  // Socials
  const socials = {
    whatsapp: d.whatsapp,
    facebook: d.facebook,
    instagram: d.instagram,
    tiktok: d.tiktok,
    snapchat: d.snapchat
  };

  let keys = Object.keys(socials).filter(k=>socials[k]);

  keys.forEach((key,i)=>{
    let div = document.createElement("div");
    div.className = "social-item";
    if(keys.length % 2 == 1 && i == keys.length-1){
      div.classList.add("center");
    }

    div.innerHTML = `
      <a href="${socials[key]}" target="_blank">
        <i class="fa-brands fa-${key}"></i>
        <p>${key}</p>
      </a>
    `;
    socialsDiv.appendChild(div);
  });
});
</script>

</body>
</html>
