<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>JustTap Profile</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Font Awesome -->
<link rel="stylesheet"
href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
*{box-sizing:border-box}

body{
  margin:0;
  min-height:100vh;
  background:#f2f2f2;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:Arial,sans-serif;
}

/* ===== CARD ===== */
.card{
  width:100%;
  max-width:420px;
  background:#fff;
  border-radius:25px;
  overflow:hidden;
  box-shadow:0 20px 45px rgba(0,0,0,.18);
}

/* ===== COVER ===== */
.cover{
  height:230px;
  background-size:cover;
  background-position:center;
}

/* ===== AVATAR ===== */
.avatar{
  width:140px;
  height:140px;
  border-radius:50%;
  border:6px solid #fff;
  margin:-75px auto 0;
  display:block;
  object-fit:cover;
}

/* ===== TEXT ===== */
.text{
  text-align:center;
  padding:10px 20px;
}

.text h2{
  margin:10px 0 5px;
  font-size:23px;
}

.job{
  font-size:15px;
  color:#666;
}

.company{
  font-size:14px;
  color:#999;
}

/* ===== ACTIONS ===== */
.actions{
  display:flex;
  justify-content:center;
  gap:25px;
  margin:20px 0;
}

.actions a{
  width:65px;
  height:65px;
  background:#f3f3f3;
  border-radius:50%;
  display:flex;
  justify-content:center;
  align-items:center;
  font-size:24px;
  color:#000;
  text-decoration:none;
  transition:.25s;
}

.actions a:hover{
  background:#000;
  color:#fff;
  transform:scale(1.1);
}

/* ===== SOCIAL ===== */
.social-box{
  background:#f4f4f4;
  margin:20px;
  padding:20px;
  border-radius:20px;
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:20px;
}

.social-item{
  background:#fff;
  border-radius:18px;
  padding:15px;
  text-align:center;
  box-shadow:0 6px 15px rgba(0,0,0,.1);
  transition:.25s;
}

.social-item:hover{
  transform:scale(1.05);
}

.social-item i{
  font-size:42px;
}

.social-item p{
  margin:10px 0 0;
  font-size:14px;
}

.social-item.center{
  grid-column:span 2;
  width:55%;
  margin:auto;
}
</style>
</head>

<body>

<div class="card">

  <div class="cover" id="cover"></div>

  <img id="avatar" class="avatar">

  <div class="text">
    <h2 id="name"></h2>
    <div class="job" id="job"></div>
    <div class="company" id="company"></div>
  </div>

  <div class="actions">
    <a id="call"><i class="fa-solid fa-phone"></i></a>
    <a id="mail"><i class="fa-solid fa-envelope"></i></a>
  </div>

  <div id="socials" class="social-box"></div>

</div>

<script>
/* ===== FIREBASE CONFIG ===== */
const firebaseConfig = {
  apiKey: "PUT_YOUR_KEY",
  authDomain: "PUT_YOUR_DOMAIN",
  projectId: "PUT_PROJECT_ID",
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

/* ===== GET USER ===== */
const params = new URLSearchParams(window.location.search);
const userId = params.get("user");

/* ===== ICON MAP ===== */
const icons = {
  whatsapp:"fa-whatsapp",
  facebook:"fa-facebook-f",
  instagram:"fa-instagram",
  tiktok:"fa-tiktok",
  snapchat:"fa-snapchat"
};

db.collection("users").doc(userId).get().then(doc=>{
  if(!doc.exists) return;

  const d = doc.data();

  document.getElementById("cover").style.backgroundImage =
    `url(${d.cover || "cover.jpg"})`;

  document.getElementById("avatar").src = d.avatar || "avatar.jpg";
  document.getElementById("name").innerText = d.name;
  document.getElementById("job").innerText = d.job;
  document.getElementById("company").innerText = d.company;

  document.getElementById("call").href = `tel:${d.phone}`;
  document.getElementById("mail").href = `mailto:${d.email}`;

  const socialsDiv = document.getElementById("socials");

  Object.keys(icons).forEach(key=>{
    if(!d[key]) return;

    const div = document.createElement("div");
    div.className = "social-item";

    if(key==="tiktok") div.classList.add("center");

    div.innerHTML = `
      <a href="${d[key]}" target="_blank"
         style="color:inherit;text-decoration:none">
        <i class="fa-brands ${icons[key]}"></i>
        <p>${key}</p>
      </a>
    `;
    socialsDiv.appendChild(div);
  });
});
</script>

</body>
</html>
